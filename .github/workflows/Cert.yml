# 🅾️ .github/workflows/Cert.yml

name: 🚀 Kiểm Tra Web Cert

on:
  # Cho phép chạy thủ công từ tab Actions trên GitHub
  workflow_dispatch:
  # Chạy tự động vào 0h sáng Chủ Nhật hàng tuần (giờ UTC)
  schedule:
    - cron: '0 0 * * 0'

jobs:
  k6_load_test:
    name: Chạy k6 Load Test
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        # [TỐI ƯU] Sử dụng phiên bản checkout mới nhất
        uses: actions/checkout@v4

      - name: Chạy k6 local test
        # [SỬA LỖI] Sử dụng phiên bản k6-action mới nhất (v0.4.0 tại thời điểm này)
        # Phiên bản này sử dụng k6 v0.50.0, đảm bảo module k6/html hoạt động ổn định.
        uses: k6io/k6-action@v0.4.0
        with:
          # [SỬA LỖI] Chỉ định tên file đầy đủ, bao gồm cả phần mở rộng .js
          filename: cert
