name: k6 Browser Test

on: [push]

jobs:
  k6-test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      # === THAY ĐỔI QUAN TRỌNG: Chạy Docker command trực tiếp ===
      - name: Run k6 browser test
        run: |
          docker run --rm -i \
            -v ${{ github.workspace }}:/github/workspace \
            -w /github/workspace \
            ghcr.io/grafana/xk6-browser:latest \
            run nezushub-browser.js
